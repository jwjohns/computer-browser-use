services:
  agent:
    build:
      context: ./agent
    ports:
      - "3000:3000"
    environment:
      - SHELL=/bin/bash
    # dockerode talks to the host engine through the socket:
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    depends_on:
      - desk

  desk:
    build:
      context: ./desk
    image: computer-browser-use-desk:latest
    ports:
      - "6080:80"    # noVNC in browser
      - "5901:5900"  # optional VNC client
      - "9222:9222"  # Chrome DevTools (automation)
    shm_size: "1gb"
    environment:
      - RESOLUTION=1920x1080
